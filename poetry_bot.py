print("๐ Poetry Discord Bot - All rights reserved | Developed by Nawaf ๐ป")
import discord
from discord.ext import commands
from discord import app_commands
from apscheduler.schedulers.asyncio import AsyncIOScheduler
from apscheduler.triggers.interval import IntervalTrigger
import random
from datetime import datetime

TOKEN = "HERE" # โ ุชููู ุงูุจูุช ุบูุฑูุง ุฅูู
GUILD_ID = ID  # โ ุบููุฑูุง ุฅูู ุจุฏูู ููุงุตู ุงู ุงุถุงูุงุช ูุณุฎ ูุตูID ุงูุณูุฑูุฑ ุญูู

intents = discord.Intents.default()
intents.guilds = True
intents.messages = True
intents.message_content = True
client = commands.Bot(command_prefix="!", intents=intents)
tree = client.tree

scheduler = AsyncIOScheduler()
scheduled_job = None
channel_to_send = None
# ----------------- ูุตุงุฆุฏ ุฏุงุฎููุฉ -----------------
poems = [
    "ูู ูุงููู ุนูุฒุฉ ุงูููุณ ุฅุฐุง ูุงู ุฎุตูู ุฑุฎูุต ูุง ุชูุญุงุฑูุจู",
    "ูุง ุทุงูู ูู ููููุงู ุ ููู ูุงู ููุงู ูุง ูู ุฃูุฏุฃ ูู ุงูุตูุช ููุนูุช .",
    "ูุง ุชุจุงูู ุจูู ุฃุจุนุฏ ููุณู .. ุจููุณู",
    "ุงูุฃูุณุงู ุงูุทูุจ ุชุจุชููู ุงูุฏููุง ุจูุง ูุง ุดุฃู ูู ุจู .",
    "ููุฑ ุงูุตุฑุงุญุฉ ุ ูููุง ููุฑ ุงูุฅุณุชุบูุงู",
    "ุฃุฑูู ุงููุงุณ ุ ุฃูููู ุญุฏูุซุงู ุนู ุงููุงุณ",
    "ุงุญุชุฑุงูู ูููุงุณ ูุง ูุฏู ุนูู ุถุนูู ุจู ูุฏู ุนูู ุชุฑุจูุชู",
    "ูู ุดูุก ูู ุนูุงุฌ ุฅูุง ุณูุงุฏ ุงูููุจ ุ ูููุฉ ุงูุฃุตู",
    "ุชุญุตููุง ุ ูููุงู ุฃุนูู ูููุซุฉ ุ ูุง ุชุนุฑู ููุฐูุฑ ุณุจููุงู",
    "ูุง ุชุตุฏููู ูุงููู ุจูู ุงุญุณูุช ุจูู ุงูุธู ููุฏ ุงูุชููุช",
    "ุงูุฌุฏุฑุงู ุงูุชู ุชุจูููุง ูู ุญูุงุชู ูุฏ ุชููู ูู ุงูุชู ุชุญูููุ ุฃู ูู ุงูุชู ุชููุฏู.",
    "ุนูุฏูุง ูููุฏู ุฌุฏุงุฑุ ูุตุจุญ ุงูุทุฑูู ุฃูุซุฑ ูุถูุญุงู ุฃูุงูู.",
    "ุงูุฌุฏุฑุงู ุงูุชู ุชุจูููุง ุญูู ููุจูุ ูุฏ ุชููู ูู ููุณูุง ุงูุชู ุชููุนู ูู ุฃู ุชุญุจ.",
    "ุงูุฌุฏุฑุงู ููุณุช ูุฌุฑุฏ ุญุฌุงุฑุฉุ ุจู ูู ุงูุญูุงุฌุฒ ุงูุชู ูุถุนูุง ูู ุทุฑูููุง ูุฃุณุจุงุจ ูุง ูุนุฑููุง.",
    "ุจุนุถ ุงูุฌุฏุฑุงู ุชูู ุจูููุง ูุจูู ุงูุขุฎุฑููุ ูุจุนุถูุง ููุท ุชูู ุจูููุง ูุจูู ุฃููุณูุง.",
    "ุงูุธุฑูู ูุง ุชุตูุน ุงูุฑุฌุงูุ ุงูุฑุฌุงู ูู ูู ูุตูุนูู ุงูุธุฑูู.",
    "ุงููุดู ูู ูุฌุฑุฏ ูุฑุตุฉ ููุจุฏุก ูู ุฌุฏูุฏุ ูููู ูุฐู ุงููุฑุฉ ุจุฐูุงุก ุฃูุจุฑ.",
    "ุฃูุถู ุงูุชูุงู ูู ุฃู ุชุนูุด ุญูุงุฉ ุณุนูุฏุฉ.",
    "ุงูุนูู ุงููุทู ูุดุงูุฏ ุจุตูุชุ ุจูููุง ูุชุญุฏุซ ุงูุฌุงูู ูู ูู ููุช.",
    "ุงูุฃูุนุงู ุฃุจูุบ ูู ุงููููุงุช.",
    "ุงูุญุจ ุฃุนููุ ูุงูุตุฏุงูุฉ ุชุดููู.",
    "ูู ูุนุฑู ููู ูุณูุทุฑ ุนูู ููุณูุ ูุง ูุญุชุงุฌ ูุณูุทุฑุฉ ุงูุขุฎุฑูู.",
    "ุงูููุช ูุง ููุชุธุฑ ุฃุญุฏูุง.",
    "ูู ูุณุนู ูุฑุงุก ุงูุญูููุฉุ ูุง ูุถู ุฃุจุฏุงู.",
    "ุงูุดุฎุต ุงูุฐู ูุง ูููุฑ ูู ุงููุณุชูุจู ูุนูุด ูู ุงููุงุถู.",
    "ุงููุฑุงูุฉ ุฃุบูู ูู ุงููุงูุ ูุฅุฐุง ููุฏุช ุงููุฑุงูุฉุ ููุฏุช ูู ุดูุก.",
    "ุฃูุช ุฃููู ููุง ุชุนุชูุฏ.",
    "ุฃุญูุงููุง ูููู ุงูุณููู ูู ุฃููู ุงูุนูุงุทู.",
    "ุงูุญูุงุฉ ูุตูุฑุฉุ ูุฐุง ุนุดูุง ุจุญููุฉ.",
    "ูู ูุง ูุนุฑู ููู ููุฏูุฑ ุงูุญูุงุฉุ ูุง ููููู ุฃู ูููู ุญูููุฉ ุงูุญุจ.",
    "ุงููุฏุฑ ูู ูุง ุชูุงูููุ ูุงููุฌุงุญ ูู ูุง ุชูุนูู.",
    "ุงูุญููุฉ ูู ุฃู ุชุนุฑู ูุชู ุชุชููู ููุชู ุชุตูุช.",
    "ุงูุธูุงู ูุง ูุทููุ ุงูููุฑ ุฏุงุฆู ูู ุงูููุงูุฉ.",
    "ููุณ ุงูุนูุด ุทูููุงู ูู ุงููููุ ุจู ุงูุนูุด ุจูุฑุงูุฉ.",
    "ุงูุตูุช ุฃุญูุงููุง ูููู ุฃุจูุบ ูู ุงูููุงู.",
    "ุฅู ููุช ุชุณุชุทูุน ุฃู ุชุบูุฑ ุทุฑููุฉ ุชูููุฑูุ ุณุชุบูุฑ ุญูุงุชู.",
    "ุงูุนูู ูู ุณุฑ ุงููุฌุงุญุ ูููู ุงูููุจ ูู ุณุฑ ุงูุญูุงุฉ.",
    "ุฅู ูู ุชูู ุฌุฑูุฆูุง ุจูุง ูููู ูุชุญููู ุฃุญูุงููุ ูุณุชุนูุด ูู ุธู ุงูุขุฎุฑูู.",
    "ูู ูุณูุฑ ุจุญุฐุฑ ุณูุชุฌูุจ ุงููููุน ูู ุงููุงููุฉ.",
    "ุฃุญุณู ูู ููุงู ุงููุงุณ ุฃู ุชูุนู ูุง ูุฑุถู ููุจู.",
    "ุงูุตุฏูู ุงูุญูููู ูู ูู ูุนุฑูู ููุง ุฃูุช ููุธู ูุญุจู.",
    "ูู ูุญุธุฉ ูู ูุฑุตุฉ ุฌุฏูุฏุฉ ูุชุจุฏุฃ ูู ุฌุฏูุฏ.",
    "ุงูุทูุจุฉ ูุง ุชุชุทูุจ ุฌูุฏูุงุ ููู ุชูููุชูุง ูุจูุฑุฉ.",
    "ุฅุฐุง ูู ุชูุงุชู ูู ุฃุฌู ูุง ุชุฑูุฏุ ูุงุนูู ุฃูู ุณุชููุฏู.",
    "ุงูุฑุบุจุฉ ูู ุงูุชููู ูู ุฎุทูุฉ ุฃููู ูุญู ุงููุฌุงุญ.",
    "ููุฉ ุงูุฅูุณุงู ุชููู ูู ุชุญููู ุจูุดุงุนุฑู ูุฃููุงุฑู.",
    "ุงูุญูุงุฉ ููุณุช ูู ุงูุนูุดุ ุจู ูู ููููุฉ ุงูุนูุด.",
    "ุงูุดุฌุงุนุฉ ูุง ุชุนูู ุบูุงุจ ุงูุฎููุ ุจู ุงูุชุบูุจ ุนููู.",
    "ุชูุฏูุฑ ุงูุฐุงุช ูู ููุชุงุญ ุงููุฌุงุญ.",
    "ุงููููุงุช ุงูุทูุจุฉ ููุง ููุฉ ูุง ูููู ุฃู ุชููุงุฑู.",
    "ูู ูุง ูุนุฑู ููู ูุชุณุงูุญุ ูุง ูุนุฑู ููู ูุญุจ.",
    "ุงูุญูุงุฉ ูุนุจุฉุ ููู ุงููุงุนุจ ุงูุฐูู ูุนุฑู ููู ูุญูู ุงูููุฒ.",
    "ูู ูุฒุฑุน ุฎูุฑูุงุ ูููู ุฎูุฑูุง.",
    "ุงูุบูู ููุณ ูู ุงููุงูุ ุจู ูู ููุจ ูููุก ุจุงูุณูุงู.",
    "ุงูุตุจุฑ ููุชุงุญ ุงููุฑุฌ.",
    "ุงููุดุงูู ูุง ุชุณุงูู ุดูุฆูุง ููุงุฑูุฉ ุจุงูุญููู.",
    "ุงูุนูู ุงููุนุงู ูู ุงูุฐู ูุนุฑู ููู ูุณุชุฎุฏู ุงููุฑุต.",
    "ุงูุชูุงุถุน ูู ุฃูุจุฑ ููุฉ ูุฏ ููุชูููุง ุงูุฅูุณุงู.",
    "ุฃูุช ูู ุชุนุด ุญููุง ุฅุฐุง ูู ุชุฌุฑุจ ุดูุฆูุง ุฌุฏูุฏูุง.",
    "ุงูุขูุงู ุงูุชู ูุง ููุนุจุฑ ุนููุง ูู ุงูุชู ุชุชุฑู ุฃูุจุฑ ุงูุฃุซุฑ.",
    "ุงูุฃูู ูู ูุง ูุฌุนููุง ูุณุชูุฑ ุฑุบู ูู ุดูุก.",
    "ุงูุญุจ ูุง ูููููุ ูููู ููุดุนุฑ.",
    "ุงูุดุฎุต ุงูุฐู ูุง ูุชุนูู ูู ุงููุงุถู ูุง ูุณุชุทูุน ุงูุนูุด ูู ุงููุณุชูุจู.",
    "ุงููุฌุงุญ ูู ูุฏุฑุฉ ุงูุดุฎุต ุนูู ุงูุชุนูู ูู ูุดูู.",
    "ุฅูุฒุญ ุจูู ุดูุก ุ ุฅูุงู ุจุฃููุฑ ุงูุฏูู ูุชุญุฏุซ ุจูู ุดูุก ุ ุฅูุงู ุจุฃุนุฑุงุถ ุงููุงุณ",
    "ูุง ูุชูุงูููู ุููุง ูุชูุงูู ุฒูู.",
    "ูุง ุชุนูุฏ ููู ุฎุฐููุ ุชุฐูุฑ ูุง ุญุฏุซ ุฃุฎุฑ ูุฑุฉ",
    "ุฃูุง ูุด ูุชุฃููู ุฃูุง ุตุงุจุฑ",
    "ูู ูุณุชูุซุฑ ุนููู ุงููุถูุญ...ุงุชุฑูู",
    "ูู ููุจู ูุชุดุฑูุน ุฅุฐุง ุฏู ุงููุทุฑ ุจุงุจู",
    "ูู ูุงุช ูุฏููู ุชุงู ููู ุฑุถู ุจููููู ุนุงุด",
    "ุนูููููููู ุนูููู ู ุชููุงุฌูุฑ",
    "ูุงููููุด ูู ุงูููุฑุฏ ุนูุจ ูุงููุง ูุง ุฃุญูุฑ ุงูุฎุฏูู",
    "ููุฏุฑุด ุน ุงูุญูููุงุฑ ุงุชุดุดุทุฑ ุน ุงูุจุฑุฏุนุฉ",
    "ุนูููุงูู ุงูุดูุญุงุชู ุณุจูููุง ุน ุงูุงุจูุงุจ",
    "ูุง ุชูู ูุงูุนู ูุงููุงูุน ุฒุจูุจุงูุฉ",
    "ุถูุน ููุณููู , ุงูููุงู ุญุฒูู ููุบุงูุฉ"
    
]

poem_queue = poems.copy()
random.shuffle(poem_queue)

# ----------------- ุฅุฑุณุงู ุงูุฅููุจุฏ -----------------
async def send_poem():
    global channel_to_send, poem_queue
    if not channel_to_send:
        return

    if not poem_queue:
        poem_queue = poems.copy()
        random.shuffle(poem_queue)

    verse = poem_queue.pop(0)
    now = datetime.now().strftime("%Y-%m-%d %H:%M")

    # ุฅูุดุงุก ูุฑุจุน ุตุบูุฑ ุจุงูููู ุงูุฑูุงุฏู ุญูู ุงูุนููุงู
    title = f"```\n THugs | ุงูุชุจุงุณุงุช \n```"  # ูุฑุจูุน ุฑูุงุฏู ุงูููู ูุญุชูู ุนูู ุงุณู ุงูุดุงุนุฑ
    
    # ุฅูุดุงุก ุงูุฑุณุงูุฉ
    message = f"# ! Nawaf ๐ท๏ธ \n\n"  # ุงูุนููุงู
    message += title  # ุงูุนููุงู ุฏุงุฎู ุงููุฑุจุน ุงูุฑูุงุฏู
    message += f"\n```ini\n{verse}\n```"  # ุงููุตูุฏุฉ ุจููู ุงูุฃุฒุฑู ุฏุงุฎู ุงูููุฏุงููุตูุฏุฉ

    message += "\n|| @here ||"  # ุงูููุดู ุจุดูู ุตุญูุญ ูุธููุฑ ุฅุดุนุงุฑ ููุฃุนุถุงุก ูู ุงูููุงุฉ

    sent_message = await channel_to_send.send(message)
    
    # ุฅุถุงูุฉ ุฑูุงูุดู ุนูู ุงูุฑุณุงูุฉ ุจุงุณุชุฎุฏุงู ID ุงูุฑูุฒ ุงูุชุนุจูุฑู
    emoji_id = "1310852555806478396"  # ุถุน ููุง ID ุงูุฑูุฒ ุงูุชุนุจูุฑู ุงูุฎุงุต ุจู
    emoji = discord.PartialEmoji(name="custom_emoji", id=int(emoji_id))  # ุงุณุชุฎุฏู ุงุณู ุงูุฑูุฒ ุงูุชุนุจูุฑู ู ID ุงูุฎุงุต ุจู
    await sent_message.add_reaction(emoji)


# ----------------- ุฃูุงูุฑ ุณูุงุด -----------------
@tree.command(name="setup", description="ุชุญุฏูุฏ ุงูููุงุฉ ูููุช ุงูุฅุฑุณุงู", guild=discord.Object(id=GUILD_ID))
@app_commands.describe(channel="ุงูููุงุฉ ุงููู ุชุฑุณู ูููุง", value="ุงููุฏุฉ ุจูู ูู ุฅุฑุณุงู (ูุซูุงู: 10mุ 2hุ 1d)", role="ุงูุฑูู ุงููู ุชุจูู ููููุดู")
async def setup1(interaction: discord.Interaction, channel: discord.TextChannel, value: str, role: discord.Role):
    global channel_to_send, scheduled_job
    channel_to_send = channel

    units = {'m': 'minutes', 'h': 'hours', 'd': 'days'}
    if value[-1] not in units or not value[:-1].isdigit():
        await interaction.response.send_message("ุงูุฑุฌุงุก ุงุณุชุฎุฏุงู ุตูุบุฉ ูุซู: 10m ุฃู 1h ุฃู 1d", ephemeral=True)
        return

    interval_kwargs = {units[value[-1]]: int(value[:-1])}

    if scheduled_job:
        scheduled_job.remove()

    scheduled_job = scheduler.add_job(send_poem, IntervalTrigger(**interval_kwargs))
    scheduler.start()
    await interaction.response.send_message(f"ุชู ุถุจุท ุงูุฅุฑุณุงู ูู {channel.mention} ูู {value} ูุน ููุดู {role.mention}", ephemeral=True)

@tree.command(name="stop", description="ุฅููุงู ุงูุฅุฑุณุงู ุงูุชููุงุฆู", guild=discord.Object(id=GUILD_ID))
async def stop(interaction: discord.Interaction):
    global scheduled_job
    if scheduled_job:
        scheduled_job.remove()
        scheduled_job = None
        await interaction.response.send_message("ุชู ุฅููุงู ุงูุฅุฑุณุงู ุงูุชููุงุฆู.", ephemeral=True)
    else:
        await interaction.response.send_message("ุงูุฅุฑุณุงู ุบูุฑ ููุนู ุญุงููุงู.", ephemeral=True)

@tree.command(name="test", description="ุฅุฑุณุงู ุฃูุชุจุงุณ ุงูุขู ููุชุฌุฑุจุฉ", guild=discord.Object(id=GUILD_ID))
async def test(interaction: discord.Interaction):
    global channel_to_send
    if not channel_to_send:
        channel_to_send = interaction.channel
    await send_poem()
    await interaction.response.send_message("ุชู ุฅุฑุณุงู ุฃูุชุจุงุณุงุช ููุชุฌุฑุจุฉ.", ephemeral=True)

@tree.command(name="help", description="ูุนูููุงุช ุนู ุงูุจูุช ูุฃูุงูุฑู", guild=discord.Object(id=GUILD_ID))
async def help_cmd(interaction: discord.Interaction):
    embed = discord.Embed(
        title=" By Nawaf | ๐ป ",
        description="ุจูุช ูุฑุณู ุฃูุชุจุงุณุงุช ุชููุงุฆููุง ุฃู ุนูุฏ ุงูุทูุจ ๐ฌ",
        color=discord.Color.purple()
    )
    embed.set_thumbnail(url="https://i.pinimg.com/736x/c5/e9/6b/c5e96b035873d8a84ce394cc38130c17.jpg")

    embed.add_field(
        name="๐๏ธ ุงูุฃูุงูุฑ ุงููุชุงุญุฉ:",
        value=(
            "โค `/setup1` โ ุถุจุท ุงูููุงุฉ ูุงูุชูููุช ูุงูุฑูู ููููุดู\n"
            "โค `/stop` โ ุฅููุงู ุงูุฅุฑุณุงู ุงูุชููุงุฆู\n"
            "โค `/test` โ ุฅุฑุณุงู ุจูุช ุฃูุชุจุงุณุงุช ุงูุขู (ุชุฌุฑูุจู)\n"
            "โค `/help` โ ุนุฑุถ ูุฐู ุงูุฑุณุงูุฉ ุงููุณุงุนุฏุฉ"
        ),
        inline=False
    )

    embed.add_field(
        name="๐ก ููุงุญุธุงุช:",
        value=(
            "- ุงุณุชุฎุฏู ุงูุชูููุช ูุซู: `10m`, `2h`, `1d`\n"
            "- ุงูุจูุช ูุฑุณู ูู ุงูููุงุฉ ุงููู ุชุฎุชุงุฑูุง ุจุนุฏ ุงูุฅุนุฏุงุฏ"
        ),
        inline=False
    )

    embed.add_field(
        name="๐ ุงูุญููู:",
        value="ูู ุงููุญุชูู ุฃูุชุจุงุณุงุช ูุญููุธ ูุฃุตุญุงุจู\nุชู ุงูุจุฑูุฌุฉ ุจูุงุณุทุฉ `Nawaf ๐ป`",
        inline=False
    )

    embed.add_field(
        name="๐ ุชูุงุตู ูุนู:",
        value="[ุณูุฑูุฑ ุงูุฏุนู](https://discord.gg/Ay4cqudf9r)",
        inline=False
    )

    embed.set_footer(text="! Nawaf โจ", icon_url="https://i.pinimg.com/736x/c5/e9/6b/c5e96b035873d8a84ce394cc38130c17.jpg")

    await interaction.response.send_message(embed=embed, ephemeral=True)
# ----------------- ุญุฏุซ on_message -----------------
@client.event
async def on_message(message):
    # ุงูุชุฃูุฏ ูู ุฃู ุงูุฑุณุงูุฉ ููุณุช ูู ุงูุจูุช ููุณู
    if message.author.bot:
        return

    # ุงูุชุฃูุฏ ูู ุฃู ุงูุฑุณุงูุฉ ูู ุจุนุฏ ุฑุณุงูุฉ ุงูุจูุช (ุงูุชู ุชุญุชูู ุนูู ุงูุงูุชุจุงุณ)
    if channel_to_send and message.channel == channel_to_send:
        # ุฅุฐุง ูุงูุช ุงูุฑุณุงูุฉ ุจุนุฏ ุงูุชุจุงุณ ุงูุจูุชุ ูุชู ุญุฐููุง
        try:
            await message.delete()
        except discord.Forbidden:
            print("ูู ูุชููู ุงูุจูุช ูู ุญุฐู ุงูุฑุณุงูุฉ ุจุณุจุจ ุนุฏู ูุฌูุฏ ุตูุงุญูุงุช")

    # ุชุฃูุฏ ูู ุชูููุฐ ุงูุฃูุงูุฑ ุจุนุฏ ุงูุฑุณุงูุฉ
    await client.process_commands(message)


# ----------------- ุนูุฏ ุชุดุบูู ุงูุจูุช -----------------
@client.event
async def on_ready():
    print(f"โ Logged in as {client.user}")
    
    activity = discord.Activity(
        type=discord.ActivityType.playing,
        name="/By # Nawaf ๐ป"
    )
    await client.change_presence(status=discord.Status.idle, activity=activity)

    try:
        synced = await client.tree.sync(guild=discord.Object(id=1293075128036364348))
        print(f"โ Synced {len(synced)} command(s).")
    except Exception as e:
        print(f"โ Error syncing commands: {e}")


client.run(TOKEN)